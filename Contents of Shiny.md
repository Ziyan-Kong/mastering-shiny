# Mastering Shiny

## Chapter 1. Welcome

这是《Mastering Shiny》的在线版本，这本书目前正在早期开发中，计划于2020年底由O’Reilly Media发行。

Shiny是一个使用R代码创建web应用程序的框架。它的设计主要考虑到了数据科学家，为此，您可以在不了解HTML、CSS或JavaScript的情况下创建非常复杂的Shiny应用程序。另一方面，Shiny并不局限于创建琐碎或预制的应用程序：它的用户界面组件可以轻松定制或扩展，它的服务器使用反应式编程，让你可以创建任何类型的后端逻辑。Shiny的设计让你在刚开始的时候感觉几乎神奇地简单，但你越深入了解它的工作原理，你就越意识到它是由背后有强大软件工程原理的通用构建块构建的。

如今，Shiny几乎和R本身一样被用于许多工作环境和行业。它在学术界被用作统计概念的教学工具，一种让本科生对学习编写代码感到兴奋的方式，一种炫耀新颖统计方法或模型的引人注目的媒介。大型制药公司在药物开发过程中使用它来加快科学家和分析师之间的合作。硅谷科技公司使用它来建立包含高级分析的实时指标仪表盘。

这本书旨在让你从对Shiny一无所知，成为一名能够编写可维护和高性能的大型复杂应用程序的专业开发人员。您将深入了解Shiny背后的反应式编程模型，并构建一个有用技术的工具箱来解决常见的应用程序挑战。

## Chapter 2. Preface

### 2.1 What is Shiny?

如果你以前从未使用过Shiny，欢迎！Shiny是一个R包，允许您轻松创建丰富的交互式web应用程序。Shiny允许你在R中获取你的作品，并通过网络浏览器将其公开，以便任何人都可以使用它。Shiny让你看起来很棒，因为它可以轻松地以最小的痛苦制作出精致的网络应用程序。

在过去，创建web应用程序对大多数R用户来说很困难，因为：

- 您需要深入了解HTML、CSS和JavaScript等web技术。
- 制作复杂的交互式应用程序需要仔细分析交互流，以确保当输入发生变化时，只有相关的输出才会更新。

Shiny通过以下方式使R程序员创建web应用程序变得更加容易：

- 提供一组精心策划的用户界面（user interface，简称UI）函数，用于生成常见任务所需的HTML、CSS和JavaScript。这意味着你不需要知道HTML/CSS/JavaScript的细节，如果你想超越Shiny为你提供的基础知识，您再去深入学习HTML/CSS/JavaScript的相关知识。
- 引入了一种新的编程风格，称为反应式编程，它可以自动跟踪代码片段的依赖关系。这意味着，每当输入发生变化时，Shiny都可以自动找出如何做最少量的工作来更新所有相关的输出。

人们使用Shiny，可以完成的工作：

- 创建跟踪重要高级性能指标的仪表板，同时便于深入了解需要更多调查的指标。
- 用交互式应用程序替换数百页的PDF文档，让用户能够跳转到他们关心的确切结果部分。
- 通过信息可视化和交互式分析，将复杂的模型传达给非技术受众。
- 为常见的工作流程提供自助数据分析，用Shiny应用程序取代电子邮件请求，该应用程序允许人们上传自己的数据并执行标准分析。您可以为没有编程技能的用户提供复杂的R分析。
- 创建交互式演示，用于教授统计学和数据科学概念，使学习者能够调整输入，并在分析中观察这些变化的下游影响。

简而言之，Shiny让你有能力将你的一些R超能力传递给任何可以使用网络的人。

### 2.2 Who should read this book?

本书面向两个主要读者：

- 有兴趣了解Shiny的R用户，以便将他们的分析转化为交互式网络应用程序。为了充分利用这本书，您应该能够自如地使用R进行数据分析，并且应该至少编写了一些函数。
- 现有的Shiny用户希望提高他们对Shiny理论的了解，以便更快、更容易地编写更高质量的应用程序。如果你的应用程序开始变得越来越大，并且你开始在管理复杂性方面遇到问题，你应该会发现这本书特别有帮助。

### 2.3 What will you learn?

这本书分为四个部分：

1. 在“Getting started”中，您将学习Shiny的基本知识，以便尽快熟悉相关概念。您将了解应用程序结构的基本知识、有用的UI组件以及反应式编程的基础。
2. “Shiny in action”建立在Shiny基础知识之上，帮助您解决常见问题，包括向用户提供反馈、上传和下载数据、用代码生成UI、减少代码重复，以及使用Shiny对tidyverse进行编程。
3. 在“Mastering reactivity”中，您将深入了解反应性编程的理论和实践，这是Shiny的编程范式。如果你是现有的Shiny用户，你将从本章中获得最大的价值，因为它将为你提供坚实的理论基础，使你能够创建专门针对你的问题的新工具。
4. 最后，在“Best practices”中，我们将以一项有用的技术调查结束，这些技术可以使您的Shiny应用程序在生产中正常工作。您将学习如何将复杂的应用程序分解为功能和模块，如何使用包来组织代码，如何测试代码以确保其正确性，以及如何衡量和提高性能。

### 2.4 What won't you learn?

本书的重点是制作有效的Shiny应用程序，并理解反应性的基本理论。我将尽我所能展示数据科学、R编程和软件工程的最佳实践，但您需要其他参考资料来掌握这些重要技能。如果你喜欢我在这本书中的写作，你可能会喜欢我关于这些主题的其他书籍：R for Data Science、Advanced R和R Packages。

还有一些关于Shiny的重要话题我没有涉及：

- 本书仅涵盖内置的用户界面工具包。这并不能提供最性感的设计，但它学习起来很简单，让你走得更远。如果您有额外的需求（或者只是厌倦了默认设置），还有许多其他包可以提供替代前端。
- Shiny应用程序的部署。将Shiny“投入生产”不在本书的范围内，因为它因公司而异，而且其中大部分与R无关（大多数挑战往往是文化或组织方面的，而不是技术方面的）。如果你是Shiny的新手，我建议你从Joe Cheng的2019 rstudio:：conf主题演讲开始：https://rstudio.com/resources/rstudioconf-2019/shiny-in-production-principles-practices-and-tools/.这将让你了解情况，广泛讨论将Shiny投入生产需要什么，以及如何克服你可能面临的一些挑战。完成后，请访问RStudio Connect网站，了解RStudio's用于在公司内部署应用程序的产品，并访问Shiny网站了解其他常见部署场景。

### 2.5 Prerequisites

在我们继续之前，请确保您拥有本书所需的所有软件：

- R: 如果你还没有安装R，你可能读错了书；我认为这本书对R基本熟悉。如果你想学习如何使用R，我推荐我的R for Data Science，它的设计目的是让你在使用R时尽可能不费吹灰之力。
- RStudio: RStudio是R的免费开源集成开发环境（IDE）。虽然您可以在任何R环境（包括R GUI和ESS）中编写和使用Shiny应用程序，但RStudio具有一些专门用于创作、调试和部署Shiny应用的不错功能。我们建议你尝试一下，但这并不是Shiny或这本书成功的必要条件。您可以从下载RStudio Desktophttps://www.rstudio.com/products/rstudio/download。
- R packages: 这本书使用了一堆R包。您可以通过运行以下程序一次安装所有这些程序

```R
install.packages(c(
  "gapminder", "ggforce", "gh", "globals", "openintro", "profvis", 
  "RSQLite", "shiny", "shinycssloaders", "shinyFeedback", 
  "shinythemes", "testthat", "thematic", "tidyverse", "vroom", 
  "waiter", "xml2", "zeallot" 
))
```

- 如果您过去下载过Shiny，请确保您的版本至少为1.6.0。